{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///Users/jordisamardzic/Desktop/github/chatwoot-odoo-dashboard/src/lib/api.ts"],"sourcesContent":["import axios from 'axios';\nimport { Lead, ChatwootContact } from './types';\n\nconst N8N_BASE_URL = 'https://n8n.srv865019.hstgr.cloud';\n\nconst api = axios.create({\n  baseURL: N8N_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\nexport const fetchLeadByContactId = async (contactId: number | string): Promise<{ lead: Lead | null }> => {\n  const response = await api.get(`/webhook/chatwoot-odoo-lookup`, {\n    params: { contact_id: contactId },\n  });\n  return response.data;\n};\n\nexport const updateLeadField = async (leadId: number, field: string, value: any) => {\n  const response = await api.post(`/webhook/odoo-update-lead`, {\n    lead_id: leadId,\n    field,\n    value,\n  });\n  return response.data;\n};\n\nexport const updateLeadStage = async (leadId: number, stageId: number) => {\n  // Reuse update lead or specific endpoint? Prompt implies \"Clicking a new stage updates... via n8n\".\n  // Assuming generic update or specific. Let's use generic update for now or a specific one if implied.\n  // Prompt says: \"Logic: Clicking a new stage updates the status in Odoo immediately via n8n.\"\n  // Using updateLeadField for stage_id is likely correct for Odoo.\n  return updateLeadField(leadId, 'stage_id', stageId);\n};\n\nexport const checkManualSync = async (data: { name: string; phone: string; email?: string; chatwoot_id: number }) => {\n  const response = await api.post(`/webhook/chatwoot-manual-sync`, data);\n  return response.data; // Expected: { lead_id: number, status: 'linked' | 'created' }\n};\n\nexport const createQuote = async (leadId: number, productId: string) => {\n  const response = await api.post(`/webhook/odoo-create-quote`, {\n    lead_id: leadId,\n    product_id: productId,\n  });\n  return response.data; // Expected: { pdf_url: string }\n};\n\nexport const askAIAgent = async (query: string, history: any[] = []) => {\n  // Streaming response might need fetch instead of axios for proper handling, but for now simple post\n  const response = await fetch(`${N8N_BASE_URL}/webhook/ask-ai-agent`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ query, history })\n  });\n  \n  if (!response.body) throw new Error('No response body');\n  return response.body.getReader();\n};\n\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;;AAGA,MAAM,eAAe;AAErB,MAAM,MAAM,sMAAK,CAAC,MAAM,CAAC;IACvB,SAAS;IACT,SAAS;QACP,gBAAgB;IAClB;AACF;AAEO,MAAM,uBAAuB,OAAO;IACzC,MAAM,WAAW,MAAM,IAAI,GAAG,CAAC,CAAC,6BAA6B,CAAC,EAAE;QAC9D,QAAQ;YAAE,YAAY;QAAU;IAClC;IACA,OAAO,SAAS,IAAI;AACtB;AAEO,MAAM,kBAAkB,OAAO,QAAgB,OAAe;IACnE,MAAM,WAAW,MAAM,IAAI,IAAI,CAAC,CAAC,yBAAyB,CAAC,EAAE;QAC3D,SAAS;QACT;QACA;IACF;IACA,OAAO,SAAS,IAAI;AACtB;AAEO,MAAM,kBAAkB,OAAO,QAAgB;IACpD,oGAAoG;IACpG,sGAAsG;IACtG,6FAA6F;IAC7F,iEAAiE;IACjE,OAAO,gBAAgB,QAAQ,YAAY;AAC7C;AAEO,MAAM,kBAAkB,OAAO;IACpC,MAAM,WAAW,MAAM,IAAI,IAAI,CAAC,CAAC,6BAA6B,CAAC,EAAE;IACjE,OAAO,SAAS,IAAI,EAAE,8DAA8D;AACtF;AAEO,MAAM,cAAc,OAAO,QAAgB;IAChD,MAAM,WAAW,MAAM,IAAI,IAAI,CAAC,CAAC,0BAA0B,CAAC,EAAE;QAC5D,SAAS;QACT,YAAY;IACd;IACA,OAAO,SAAS,IAAI,EAAE,gCAAgC;AACxD;AAEO,MAAM,aAAa,OAAO,OAAe,UAAiB,EAAE;IACjE,oGAAoG;IACpG,MAAM,WAAW,MAAM,MAAM,GAAG,aAAa,qBAAqB,CAAC,EAAE;QACjE,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;YAAE;YAAO;QAAQ;IAC1C;IAEA,IAAI,CAAC,SAAS,IAAI,EAAE,MAAM,IAAI,MAAM;IACpC,OAAO,SAAS,IAAI,CAAC,SAAS;AAChC"}},
    {"offset": {"line": 164, "column": 0}, "map": {"version":3,"sources":["file:///Users/jordisamardzic/Desktop/github/chatwoot-odoo-dashboard/src/lib/utils.ts"],"sourcesContent":["import { type ClassValue, clsx } from \"clsx\";\nimport { twMerge } from \"tailwind-merge\";\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n\nexport function formatCurrency(value: number) {\n  return new Intl.NumberFormat('nl-NL', {\n    style: 'currency',\n    currency: 'EUR',\n  }).format(value);\n}\n\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,4NAAO,EAAC,IAAA,mMAAI,EAAC;AACtB;AAEO,SAAS,eAAe,KAAa;IAC1C,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS;QACpC,OAAO;QACP,UAAU;IACZ,GAAG,MAAM,CAAC;AACZ"}},
    {"offset": {"line": 187, "column": 0}, "map": {"version":3,"sources":["file:///Users/jordisamardzic/Desktop/github/chatwoot-odoo-dashboard/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cn } from \"@/lib/utils\"\n\nexport interface InputProps\n  extends React.InputHTMLAttributes<HTMLInputElement> {}\n\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAKA,MAAM,sBAAQ,yQAAgB,CAC5B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,oSAAC;QACC,MAAM;QACN,WAAW,IAAA,+KAAE,EACX,gWACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,MAAM,WAAW,GAAG"}},
    {"offset": {"line": 215, "column": 0}, "map": {"version":3,"sources":["file:///Users/jordisamardzic/Desktop/github/chatwoot-odoo-dashboard/src/components/LeadDetails.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { Lead } from '@/lib/types';\nimport { updateLeadField } from '@/lib/api';\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\nimport { Input } from './ui/input';\nimport { Loader2, Check } from 'lucide-react';\nimport { cn } from '@/lib/utils';\n\n// Simple Label component inline for now\nconst Label = ({ className, children, ...props }: React.HTMLAttributes<HTMLLabelElement>) => (\n  <label className={cn(\"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\", className)} {...props}>{children}</label>\n);\n\ninterface LeadDetailsProps {\n  lead: Lead;\n}\n\nexport default function LeadDetails({ lead }: LeadDetailsProps) {\n  const queryClient = useQueryClient();\n\n  const { mutate, isPending, variables } = useMutation({\n    mutationFn: async ({ field, value }: { field: string; value: string }) => {\n      return await updateLeadField(lead.id, field, value);\n    },\n    onSuccess: () => {\n       // Invalidate query to refetch fresh data\n       queryClient.invalidateQueries({ queryKey: ['lead', lead.id] });\n    },\n    onError: (error) => {\n      console.error(\"Failed to update\", error);\n      alert(\"Update failed\"); // Replace with toast later\n    }\n  });\n\n  // Helper to render editable field\n  const renderField = (label: string, fieldKey: keyof Lead | string, value: string | undefined, type: string = \"text\") => {\n    const [localValue, setLocalValue] = useState(value || '');\n    const [isDirty, setIsDirty] = useState(false);\n\n    useEffect(() => {\n        setLocalValue(value || '');\n    }, [value]);\n\n    const handleBlur = () => {\n      if (localValue !== (value || '')) {\n        mutate({ field: fieldKey as string, value: localValue });\n        setIsDirty(false);\n      }\n    };\n\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        setLocalValue(e.target.value);\n        setIsDirty(true);\n    };\n\n    const isUpdating = isPending && variables?.field === fieldKey;\n\n    return (\n      <div className=\"grid gap-2\">\n        <Label>{label}</Label>\n        <div className=\"relative\">\n          <Input \n            type={type}\n            value={localValue} \n            onChange={handleChange}\n            onBlur={handleBlur}\n            disabled={isUpdating}\n            className={cn(isUpdating && \"opacity-50\")}\n          />\n          {isUpdating && <Loader2 className=\"absolute right-3 top-2.5 h-4 w-4 animate-spin text-muted-foreground\" />}\n          {!isUpdating && isDirty && <div className=\"absolute right-3 top-2.5 h-2 w-2 rounded-full bg-yellow-500\" title=\"Unsaved\" />}\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"grid gap-4 py-4\">\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n        {renderField(\"Naam\", \"contact_name\", lead.contact_name || lead.name)}\n        {renderField(\"Telefoon\", \"phone\", lead.phone, \"tel\")}\n        {renderField(\"Email\", \"email_from\", lead.email_from, \"email\")}\n        {renderField(\"Voertuig\", \"x_studio_voertuig\", lead.x_studio_voertuig)}\n        {renderField(\"Velgmodel\", \"x_studio_velgmodel\", lead.x_studio_velgmodel)}\n        {renderField(\"Inchmaat\", \"x_studio_inchmaat\", lead.x_studio_inchmaat)}\n        {renderField(\"Kleur\", \"x_studio_kleur\", lead.x_studio_kleur)}\n      </div>\n      <div className=\"text-xs text-muted-foreground mt-2\">\n        Wijzigingen worden automatisch opgeslagen.\n      </div>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AACA;AAAA;AACA;AACA;AACA;AARA;;;;;;;;AAUA,wCAAwC;AACxC,MAAM,QAAQ,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAA+C,iBACtF,oSAAC;QAAM,WAAW,IAAA,+KAAE,EAAC,8FAA8F;QAAa,GAAG,KAAK;kBAAG;;;;;;AAO9H,SAAS,YAAY,EAAE,IAAI,EAAoB;IAC5D,MAAM,cAAc,IAAA,8PAAc;IAElC,MAAM,EAAE,MAAM,EAAE,SAAS,EAAE,SAAS,EAAE,GAAG,IAAA,mPAAW,EAAC;QACnD,YAAY,OAAO,EAAE,KAAK,EAAE,KAAK,EAAoC;YACnE,OAAO,MAAM,IAAA,0LAAe,EAAC,KAAK,EAAE,EAAE,OAAO;QAC/C;QACA,WAAW;YACR,yCAAyC;YACzC,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;oBAAQ,KAAK,EAAE;iBAAC;YAAC;QAC/D;QACA,SAAS,CAAC;YACR,QAAQ,KAAK,CAAC,oBAAoB;YAClC,MAAM,kBAAkB,2BAA2B;QACrD;IACF;IAEA,kCAAkC;IAClC,MAAM,cAAc,CAAC,OAAe,UAA+B,OAA2B,OAAe,MAAM;QACjH,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,uQAAQ,EAAC,SAAS;QACtD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,uQAAQ,EAAC;QAEvC,IAAA,wQAAS,EAAC;YACN,cAAc,SAAS;QAC3B,GAAG;YAAC;SAAM;QAEV,MAAM,aAAa;YACjB,IAAI,eAAe,CAAC,SAAS,EAAE,GAAG;gBAChC,OAAO;oBAAE,OAAO;oBAAoB,OAAO;gBAAW;gBACtD,WAAW;YACb;QACF;QAEA,MAAM,eAAe,CAAC;YAClB,cAAc,EAAE,MAAM,CAAC,KAAK;YAC5B,WAAW;QACf;QAEA,MAAM,aAAa,aAAa,WAAW,UAAU;QAErD,qBACE,oSAAC;YAAI,WAAU;;8BACb,oSAAC;8BAAO;;;;;;8BACR,oSAAC;oBAAI,WAAU;;sCACb,oSAAC,gMAAK;4BACJ,MAAM;4BACN,OAAO;4BACP,UAAU;4BACV,QAAQ;4BACR,UAAU;4BACV,WAAW,IAAA,+KAAE,EAAC,cAAc;;;;;;wBAE7B,4BAAc,oSAAC,kRAAO;4BAAC,WAAU;;;;;;wBACjC,CAAC,cAAc,yBAAW,oSAAC;4BAAI,WAAU;4BAA8D,OAAM;;;;;;;;;;;;;;;;;;IAItH;IAEA,qBACE,oSAAC;QAAI,WAAU;;0BACb,oSAAC;gBAAI,WAAU;;oBACZ,YAAY,QAAQ,gBAAgB,KAAK,YAAY,IAAI,KAAK,IAAI;oBAClE,YAAY,YAAY,SAAS,KAAK,KAAK,EAAE;oBAC7C,YAAY,SAAS,cAAc,KAAK,UAAU,EAAE;oBACpD,YAAY,YAAY,qBAAqB,KAAK,iBAAiB;oBACnE,YAAY,aAAa,sBAAsB,KAAK,kBAAkB;oBACtE,YAAY,YAAY,qBAAqB,KAAK,iBAAiB;oBACnE,YAAY,SAAS,kBAAkB,KAAK,cAAc;;;;;;;0BAE7D,oSAAC;gBAAI,WAAU;0BAAqC;;;;;;;;;;;;AAK1D"}},
    {"offset": {"line": 379, "column": 0}, "map": {"version":3,"sources":["file:///Users/jordisamardzic/Desktop/github/chatwoot-odoo-dashboard/src/components/LeadPipeline.tsx"],"sourcesContent":["'use client';\n\nimport { Lead, PipelineStage, STAGES } from '@/lib/types';\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\nimport { updateLeadStage, updateLeadField } from '@/lib/api';\nimport { cn } from '@/lib/utils';\nimport { Check, Loader2 } from 'lucide-react';\nimport { useState, useEffect } from 'react';\n\ninterface LeadPipelineProps {\n  lead: Lead;\n}\n\nexport default function LeadPipeline({ lead }: LeadPipelineProps) {\n  const queryClient = useQueryClient();\n  const currentStageId = lead.stage_id ? lead.stage_id[0] : 0;\n\n  const stageMutation = useMutation({\n    mutationFn: ({ stageId }: { stageId: number }) => updateLeadStage(lead.id, stageId),\n    onSuccess: () => queryClient.invalidateQueries({ queryKey: ['lead', lead.id] }),\n  });\n\n  const probMutation = useMutation({\n    mutationFn: ({ prob }: { prob: number }) => updateLeadField(lead.id, 'probability', prob),\n    onSuccess: () => queryClient.invalidateQueries({ queryKey: ['lead', lead.id] }),\n  });\n\n  const [probability, setProbability] = useState(lead.probability || 0);\n\n  useEffect(() => {\n      setProbability(lead.probability || 0);\n  }, [lead.probability]);\n\n  const handleStageClick = (stageId: number) => {\n    if (stageId === currentStageId) return;\n    stageMutation.mutate({ stageId });\n  };\n\n  const handleProbChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setProbability(Number(e.target.value));\n  };\n\n  const handleProbCommit = () => {\n    if (probability !== lead.probability) {\n        probMutation.mutate({ prob: probability });\n    }\n  };\n\n  return (\n    <div className=\"space-y-6 py-4\">\n      {/* Pipeline Stepper */}\n      <div className=\"relative flex items-center justify-between w-full\">\n        <div className=\"absolute top-1/2 left-0 w-full h-1 bg-gray-200 -z-10 transform -translate-y-1/2\" />\n        \n        {STAGES.map((stage, index) => {\n          const isActive = currentStageId === stage.id;\n          const isCompleted = STAGES.findIndex(s => s.id === currentStageId) > index;\n          const isPending = stageMutation.isPending && stageMutation.variables?.stageId === stage.id;\n\n          return (\n            <button\n              key={stage.id}\n              onClick={() => handleStageClick(stage.id)}\n              disabled={stageMutation.isPending}\n              className={cn(\n                \"flex flex-col items-center group focus:outline-none\",\n                (isActive || isCompleted) ? \"text-blue-600\" : \"text-gray-500\"\n              )}\n            >\n              <div className={cn(\n                \"w-8 h-8 rounded-full flex items-center justify-center border-2 transition-colors bg-white\",\n                isActive ? \"border-blue-600 bg-blue-50\" : \n                isCompleted ? \"border-blue-600 bg-blue-600 text-white\" : \n                \"border-gray-300 group-hover:border-gray-400\"\n              )}>\n                {isPending ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : \n                 isCompleted ? <Check className=\"w-4 h-4\" /> : \n                 <span className=\"text-xs font-bold\">{index + 1}</span>}\n              </div>\n              <span className=\"mt-2 text-xs font-medium\">{stage.name}</span>\n            </button>\n          );\n        })}\n      </div>\n\n      {/* Probability Slider */}\n      <div className=\"space-y-2\">\n        <div className=\"flex justify-between text-sm\">\n          <span className=\"font-medium\">Slagingskans</span>\n          <span className=\"font-bold\">{probability}%</span>\n        </div>\n        <input\n          type=\"range\"\n          min=\"0\"\n          max=\"100\"\n          step=\"10\"\n          value={probability}\n          onChange={handleProbChange}\n          onMouseUp={handleProbCommit}\n          onTouchEnd={handleProbCommit}\n          className=\"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-600\"\n          disabled={probMutation.isPending}\n        />\n      </div>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":";;;;;;;;;;AAGA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAPA;;;;;;;;AAae,SAAS,aAAa,EAAE,IAAI,EAAqB;IAC9D,MAAM,cAAc,IAAA,8PAAc;IAClC,MAAM,iBAAiB,KAAK,QAAQ,GAAG,KAAK,QAAQ,CAAC,EAAE,GAAG;IAE1D,MAAM,gBAAgB,IAAA,mPAAW,EAAC;QAChC,YAAY,CAAC,EAAE,OAAO,EAAuB,GAAK,IAAA,0LAAe,EAAC,KAAK,EAAE,EAAE;QAC3E,WAAW,IAAM,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;oBAAQ,KAAK,EAAE;iBAAC;YAAC;IAC/E;IAEA,MAAM,eAAe,IAAA,mPAAW,EAAC;QAC/B,YAAY,CAAC,EAAE,IAAI,EAAoB,GAAK,IAAA,0LAAe,EAAC,KAAK,EAAE,EAAE,eAAe;QACpF,WAAW,IAAM,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;oBAAQ,KAAK,EAAE;iBAAC;YAAC;IAC/E;IAEA,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,uQAAQ,EAAC,KAAK,WAAW,IAAI;IAEnE,IAAA,wQAAS,EAAC;QACN,eAAe,KAAK,WAAW,IAAI;IACvC,GAAG;QAAC,KAAK,WAAW;KAAC;IAErB,MAAM,mBAAmB,CAAC;QACxB,IAAI,YAAY,gBAAgB;QAChC,cAAc,MAAM,CAAC;YAAE;QAAQ;IACjC;IAEA,MAAM,mBAAmB,CAAC;QACxB,eAAe,OAAO,EAAE,MAAM,CAAC,KAAK;IACtC;IAEA,MAAM,mBAAmB;QACvB,IAAI,gBAAgB,KAAK,WAAW,EAAE;YAClC,aAAa,MAAM,CAAC;gBAAE,MAAM;YAAY;QAC5C;IACF;IAEA,qBACE,oSAAC;QAAI,WAAU;;0BAEb,oSAAC;gBAAI,WAAU;;kCACb,oSAAC;wBAAI,WAAU;;;;;;oBAEd,OAAO,GAAG,CAAC,CAAC,OAAO;wBAClB,MAAM,WAAW,mBAAmB,MAAM,EAAE;wBAC5C,MAAM,cAAc,OAAO,SAAS,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,kBAAkB;wBACrE,MAAM,YAAY,cAAc,SAAS,IAAI,cAAc,SAAS,EAAE,YAAY,MAAM,EAAE;wBAE1F,qBACE,oSAAC;4BAEC,SAAS,IAAM,iBAAiB,MAAM,EAAE;4BACxC,UAAU,cAAc,SAAS;4BACjC,WAAW,IAAA,+KAAE,EACX,uDACA,AAAC,YAAY,cAAe,kBAAkB;;8CAGhD,oSAAC;oCAAI,WAAW,IAAA,+KAAE,EAChB,6FACA,WAAW,+BACX,cAAc,2CACd;8CAEC,0BAAY,oSAAC,kRAAO;wCAAC,WAAU;;;;;+CAC/B,4BAAc,oSAAC,mQAAK;wCAAC,WAAU;;;;;6DAC/B,oSAAC;wCAAK,WAAU;kDAAqB,QAAQ;;;;;;;;;;;8CAEhD,oSAAC;oCAAK,WAAU;8CAA4B,MAAM,IAAI;;;;;;;2BAlBjD,MAAM,EAAE;;;;;oBAqBnB;;;;;;;0BAIF,oSAAC;gBAAI,WAAU;;kCACb,oSAAC;wBAAI,WAAU;;0CACb,oSAAC;gCAAK,WAAU;0CAAc;;;;;;0CAC9B,oSAAC;gCAAK,WAAU;;oCAAa;oCAAY;;;;;;;;;;;;;kCAE3C,oSAAC;wBACC,MAAK;wBACL,KAAI;wBACJ,KAAI;wBACJ,MAAK;wBACL,OAAO;wBACP,UAAU;wBACV,WAAW;wBACX,YAAY;wBACZ,WAAU;wBACV,UAAU,aAAa,SAAS;;;;;;;;;;;;;;;;;;AAK1C"}},
    {"offset": {"line": 581, "column": 0}, "map": {"version":3,"sources":["file:///Users/jordisamardzic/Desktop/github/chatwoot-odoo-dashboard/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cn } from \"@/lib/utils\"\nimport { Loader2 } from \"lucide-react\"\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  variant?: \"default\" | \"outline\" | \"ghost\" | \"destructive\";\n  size?: \"default\" | \"sm\" | \"lg\" | \"icon\";\n  isLoading?: boolean;\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant = \"default\", size = \"default\", isLoading, children, ...props }, ref) => {\n    const variants = {\n      default: \"bg-blue-600 text-white hover:bg-blue-700\",\n      outline: \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n      ghost: \"hover:bg-accent hover:text-accent-foreground\",\n      destructive: \"bg-red-500 text-white hover:bg-red-600\",\n    }\n    const sizes = {\n      default: \"h-10 px-4 py-2\",\n      sm: \"h-9 rounded-md px-3\",\n      lg: \"h-11 rounded-md px-8\",\n      icon: \"h-10 w-10\",\n    }\n    \n    return (\n      <button\n        className={cn(\n          \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\",\n          variants[variant],\n          sizes[size],\n          className\n        )}\n        ref={ref}\n        disabled={isLoading || props.disabled}\n        {...props}\n      >\n        {isLoading && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\n        {children}\n      </button>\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button }\n\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;AASA,MAAM,uBAAS,yQAAgB,CAC7B,CAAC,EAAE,SAAS,EAAE,UAAU,SAAS,EAAE,OAAO,SAAS,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE;IACpF,MAAM,WAAW;QACf,SAAS;QACT,SAAS;QACT,OAAO;QACP,aAAa;IACf;IACA,MAAM,QAAQ;QACZ,SAAS;QACT,IAAI;QACJ,IAAI;QACJ,MAAM;IACR;IAEA,qBACE,oSAAC;QACC,WAAW,IAAA,+KAAE,EACX,wQACA,QAAQ,CAAC,QAAQ,EACjB,KAAK,CAAC,KAAK,EACX;QAEF,KAAK;QACL,UAAU,aAAa,MAAM,QAAQ;QACpC,GAAG,KAAK;;YAER,2BAAa,oSAAC,kRAAO;gBAAC,WAAU;;;;;;YAChC;;;;;;;AAGP;AAEF,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 633, "column": 0}, "map": {"version":3,"sources":["file:///Users/jordisamardzic/Desktop/github/chatwoot-odoo-dashboard/src/components/ActionsPanel.tsx"],"sourcesContent":["'use client';\n\nimport { Lead } from '@/lib/types';\nimport { Button } from './ui/button';\nimport { FileText, ExternalLink } from 'lucide-react';\nimport { createQuote } from '@/lib/api';\nimport { useMutation } from '@tanstack/react-query';\n\ninterface ActionsPanelProps {\n  lead: Lead;\n}\n\nexport default function ActionsPanel({ lead }: ActionsPanelProps) {\n  \n  const quoteMutation = useMutation({\n    mutationFn: () => {\n        // Assuming product_id is derived from lead.x_studio_velgmodel or similar, or just a default generic quote\n        const productId = lead.x_studio_velgmodel || \"standard_rim\";\n        return createQuote(lead.id, productId);\n    },\n    onSuccess: (data) => {\n      if (data.url) {\n        window.open(data.url, '_blank');\n      } else {\n        alert(\"Offerte gemaakt, maar geen URL ontvangen.\");\n      }\n    },\n    onError: () => {\n      alert(\"Kon offerte niet genereren.\");\n    }\n  });\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"flex items-center justify-between\">\n        <h3 className=\"text-sm font-semibold uppercase tracking-wider text-muted-foreground\">Acties</h3>\n      </div>\n      <div className=\"grid gap-2\">\n        <Button \n          variant=\"outline\" \n          className=\"justify-start\" \n          onClick={() => quoteMutation.mutate()}\n          isLoading={quoteMutation.isPending}\n          disabled={!lead.x_studio_velgmodel}\n          title={!lead.x_studio_velgmodel ? \"Selecteer eerst een velgmodel\" : \"\"}\n        >\n          <FileText className=\"mr-2 h-4 w-4\" />\n          Maak Offerte PDF\n        </Button>\n        \n        {lead.id && (\n          <Button \n            variant=\"ghost\" \n            className=\"justify-start text-blue-600 hover:text-blue-700\"\n            onClick={() => window.open(`https://korbach-forged.odoo.com/web#id=${lead.id}&model=crm.lead&view_type=form`, '_blank')}\n          >\n            <ExternalLink className=\"mr-2 h-4 w-4\" />\n            Open in Odoo\n          </Button>\n        )}\n      </div>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAGA;AACA;AAAA;AACA;AACA;AANA;;;;;;AAYe,SAAS,aAAa,EAAE,IAAI,EAAqB;IAE9D,MAAM,gBAAgB,IAAA,mPAAW,EAAC;QAChC,YAAY;YACR,0GAA0G;YAC1G,MAAM,YAAY,KAAK,kBAAkB,IAAI;YAC7C,OAAO,IAAA,sLAAW,EAAC,KAAK,EAAE,EAAE;QAChC;QACA,WAAW,CAAC;YACV,IAAI,KAAK,GAAG,EAAE;gBACZ,OAAO,IAAI,CAAC,KAAK,GAAG,EAAE;YACxB,OAAO;gBACL,MAAM;YACR;QACF;QACA,SAAS;YACP,MAAM;QACR;IACF;IAEA,qBACE,oSAAC;QAAI,WAAU;;0BACb,oSAAC;gBAAI,WAAU;0BACb,cAAA,oSAAC;oBAAG,WAAU;8BAAuE;;;;;;;;;;;0BAEvF,oSAAC;gBAAI,WAAU;;kCACb,oSAAC,kMAAM;wBACL,SAAQ;wBACR,WAAU;wBACV,SAAS,IAAM,cAAc,MAAM;wBACnC,WAAW,cAAc,SAAS;wBAClC,UAAU,CAAC,KAAK,kBAAkB;wBAClC,OAAO,CAAC,KAAK,kBAAkB,GAAG,kCAAkC;;0CAEpE,oSAAC,gRAAQ;gCAAC,WAAU;;;;;;4BAAiB;;;;;;;oBAItC,KAAK,EAAE,kBACN,oSAAC,kMAAM;wBACL,SAAQ;wBACR,WAAU;wBACV,SAAS,IAAM,OAAO,IAAI,CAAC,CAAC,uCAAuC,EAAE,KAAK,EAAE,CAAC,8BAA8B,CAAC,EAAE;;0CAE9G,oSAAC,4RAAY;gCAAC,WAAU;;;;;;4BAAiB;;;;;;;;;;;;;;;;;;;AAOrD"}},
    {"offset": {"line": 746, "column": 0}, "map": {"version":3,"sources":["file:///Users/jordisamardzic/Desktop/github/chatwoot-odoo-dashboard/src/components/ui/modal.tsx"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { X } from 'lucide-react';\nimport { Button } from './button';\n\ninterface ModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  title: string;\n  children: React.ReactNode;\n}\n\nexport const Modal: React.FC<ModalProps> = ({ isOpen, onClose, title, children }) => {\n  useEffect(() => {\n    const handleEsc = (e: KeyboardEvent) => {\n      if (e.key === 'Escape') onClose();\n    };\n    window.addEventListener('keydown', handleEsc);\n    return () => window.removeEventListener('keydown', handleEsc);\n  }, [onClose]);\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4\">\n      <div className=\"w-full max-w-md rounded-lg bg-white shadow-lg animate-in fade-in zoom-in-95 duration-200\">\n        <div className=\"flex items-center justify-between border-b p-4\">\n          <h3 className=\"text-lg font-semibold\">{title}</h3>\n          <Button variant=\"ghost\" size=\"icon\" onClick={onClose}>\n            <X className=\"h-4 w-4\" />\n          </Button>\n        </div>\n        <div className=\"p-4\">\n          {children}\n        </div>\n      </div>\n    </div>\n  );\n};\n\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;AASO,MAAM,QAA8B,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE,KAAK,EAAE,QAAQ,EAAE;IAC9E,IAAA,wQAAS,EAAC;QACR,MAAM,YAAY,CAAC;YACjB,IAAI,EAAE,GAAG,KAAK,UAAU;QAC1B;QACA,OAAO,gBAAgB,CAAC,WAAW;QACnC,OAAO,IAAM,OAAO,mBAAmB,CAAC,WAAW;IACrD,GAAG;QAAC;KAAQ;IAEZ,IAAI,CAAC,QAAQ,OAAO;IAEpB,qBACE,oSAAC;QAAI,WAAU;kBACb,cAAA,oSAAC;YAAI,WAAU;;8BACb,oSAAC;oBAAI,WAAU;;sCACb,oSAAC;4BAAG,WAAU;sCAAyB;;;;;;sCACvC,oSAAC,kMAAM;4BAAC,SAAQ;4BAAQ,MAAK;4BAAO,SAAS;sCAC3C,cAAA,oSAAC,uPAAC;gCAAC,WAAU;;;;;;;;;;;;;;;;;8BAGjB,oSAAC;oBAAI,WAAU;8BACZ;;;;;;;;;;;;;;;;;AAKX"}},
    {"offset": {"line": 831, "column": 0}, "map": {"version":3,"sources":["file:///Users/jordisamardzic/Desktop/github/chatwoot-odoo-dashboard/src/components/CreateLeadModal.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { Modal } from './ui/modal';\nimport { Input } from './ui/input';\nimport { Button } from './ui/button';\nimport { checkManualSync } from '@/lib/api';\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\nimport { ChatwootContact } from '@/lib/types';\n\ninterface CreateLeadModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  contact: ChatwootContact;\n}\n\nexport default function CreateLeadModal({ isOpen, onClose, contact }: CreateLeadModalProps) {\n  const [name, setName] = useState(contact.name || '');\n  const [phone, setPhone] = useState(contact.phone_number || '');\n  const [email, setEmail] = useState(contact.email || '');\n  const queryClient = useQueryClient();\n\n  const mutation = useMutation({\n    mutationFn: checkManualSync,\n    onSuccess: (data) => {\n      // Data likely contains { lead_id, status, message }\n      // We should invalidate the main lead query to reload the dashboard with the new/linked lead\n      queryClient.invalidateQueries({ queryKey: ['lead'] }); // Invalidate generic or specific\n      // Ideally we pass the new lead ID up or reload context. \n      // Assuming the main page queries based on Chatwoot ID, re-fetching that will now find the lead.\n      onClose();\n      alert(`Succes: ${data.status === 'created' ? 'Nieuwe lead aangemaakt' : 'Gekoppeld aan bestaande lead'}`);\n    },\n    onError: () => {\n      alert(\"Fout bij synchroniseren.\");\n    }\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    mutation.mutate({\n      name,\n      phone,\n      email,\n      chatwoot_id: contact.id\n    });\n  };\n\n  return (\n    <Modal isOpen={isOpen} onClose={onClose} title=\"Nieuwe Lead / Koppelen\">\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\n        <div className=\"space-y-2\">\n          <label className=\"text-sm font-medium\">Naam</label>\n          <Input value={name} onChange={e => setName(e.target.value)} required />\n        </div>\n        <div className=\"space-y-2\">\n          <label className=\"text-sm font-medium\">Telefoon</label>\n          <Input value={phone} onChange={e => setPhone(e.target.value)} required />\n        </div>\n        <div className=\"space-y-2\">\n          <label className=\"text-sm font-medium\">Email</label>\n          <Input value={email} onChange={e => setEmail(e.target.value)} type=\"email\" />\n        </div>\n        \n        <div className=\"pt-4 flex justify-end space-x-2\">\n          <Button type=\"button\" variant=\"outline\" onClick={onClose}>Annuleren</Button>\n          <Button type=\"submit\" isLoading={mutation.isPending}>\n            Sync naar Odoo\n          </Button>\n        </div>\n      </form>\n    </Modal>\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAPA;;;;;;;;AAgBe,SAAS,gBAAgB,EAAE,MAAM,EAAE,OAAO,EAAE,OAAO,EAAwB;IACxF,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,uQAAQ,EAAC,QAAQ,IAAI,IAAI;IACjD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,uQAAQ,EAAC,QAAQ,YAAY,IAAI;IAC3D,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,uQAAQ,EAAC,QAAQ,KAAK,IAAI;IACpD,MAAM,cAAc,IAAA,8PAAc;IAElC,MAAM,WAAW,IAAA,mPAAW,EAAC;QAC3B,YAAY,0LAAe;QAC3B,WAAW,CAAC;YACV,oDAAoD;YACpD,4FAA4F;YAC5F,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;iBAAO;YAAC,IAAI,iCAAiC;YACxF,yDAAyD;YACzD,gGAAgG;YAChG;YACA,MAAM,CAAC,QAAQ,EAAE,KAAK,MAAM,KAAK,YAAY,2BAA2B,gCAAgC;QAC1G;QACA,SAAS;YACP,MAAM;QACR;IACF;IAEA,MAAM,eAAe,CAAC;QACpB,EAAE,cAAc;QAChB,SAAS,MAAM,CAAC;YACd;YACA;YACA;YACA,aAAa,QAAQ,EAAE;QACzB;IACF;IAEA,qBACE,oSAAC,gMAAK;QAAC,QAAQ;QAAQ,SAAS;QAAS,OAAM;kBAC7C,cAAA,oSAAC;YAAK,UAAU;YAAc,WAAU;;8BACtC,oSAAC;oBAAI,WAAU;;sCACb,oSAAC;4BAAM,WAAU;sCAAsB;;;;;;sCACvC,oSAAC,gMAAK;4BAAC,OAAO;4BAAM,UAAU,CAAA,IAAK,QAAQ,EAAE,MAAM,CAAC,KAAK;4BAAG,QAAQ;;;;;;;;;;;;8BAEtE,oSAAC;oBAAI,WAAU;;sCACb,oSAAC;4BAAM,WAAU;sCAAsB;;;;;;sCACvC,oSAAC,gMAAK;4BAAC,OAAO;4BAAO,UAAU,CAAA,IAAK,SAAS,EAAE,MAAM,CAAC,KAAK;4BAAG,QAAQ;;;;;;;;;;;;8BAExE,oSAAC;oBAAI,WAAU;;sCACb,oSAAC;4BAAM,WAAU;sCAAsB;;;;;;sCACvC,oSAAC,gMAAK;4BAAC,OAAO;4BAAO,UAAU,CAAA,IAAK,SAAS,EAAE,MAAM,CAAC,KAAK;4BAAG,MAAK;;;;;;;;;;;;8BAGrE,oSAAC;oBAAI,WAAU;;sCACb,oSAAC,kMAAM;4BAAC,MAAK;4BAAS,SAAQ;4BAAU,SAAS;sCAAS;;;;;;sCAC1D,oSAAC,kMAAM;4BAAC,MAAK;4BAAS,WAAW,SAAS,SAAS;sCAAE;;;;;;;;;;;;;;;;;;;;;;;AAO/D"}},
    {"offset": {"line": 1014, "column": 0}, "map": {"version":3,"sources":["file:///Users/jordisamardzic/Desktop/github/chatwoot-odoo-dashboard/src/components/AIAssistant.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useRef, useEffect } from 'react';\nimport { Button } from './ui/button';\nimport { Input } from './ui/input';\nimport { MessageSquare, Send, X, Sparkles } from 'lucide-react';\nimport { askAIAgent } from '@/lib/api';\nimport { cn } from '@/lib/utils';\n\nexport default function AIAssistant() {\n  const [isOpen, setIsOpen] = useState(false);\n  const [messages, setMessages] = useState<{ role: 'user' | 'assistant'; content: string }[]>([]);\n  const [input, setInput] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const scrollRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (scrollRef.current) {\n      scrollRef.current.scrollTop = scrollRef.current.scrollHeight;\n    }\n  }, [messages]);\n\n  const handleSend = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!input.trim()) return;\n\n    const userMsg = input;\n    setMessages(prev => [...prev, { role: 'user', content: userMsg }]);\n    setInput('');\n    setIsLoading(true);\n\n    try {\n      const reader = await askAIAgent(userMsg, messages);\n      if (!reader) throw new Error(\"No stream\");\n      \n      // Add placeholder for assistant\n      setMessages(prev => [...prev, { role: 'assistant', content: '' }]);\n\n      const decoder = new TextDecoder();\n      let done = false;\n      let accumulatedResponse = \"\";\n\n      while (!done) {\n        const { value, done: doneReading } = await reader.read();\n        done = doneReading;\n        const chunkValue = decoder.decode(value, { stream: true });\n        accumulatedResponse += chunkValue;\n        \n        setMessages(prev => {\n           const newHistory = [...prev];\n           const lastMsg = newHistory[newHistory.length - 1];\n           if (lastMsg.role === 'assistant') {\n               lastMsg.content = accumulatedResponse;\n           }\n           return newHistory;\n        });\n      }\n    } catch (error) {\n      console.error(error);\n      setMessages(prev => [...prev, { role: 'assistant', content: \"Sorry, ik kon geen verbinding maken met de AI agent.\" }]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  if (!isOpen) {\n    return (\n      <Button\n        onClick={() => setIsOpen(true)}\n        className=\"fixed bottom-4 right-4 h-12 w-12 rounded-full shadow-lg p-0\"\n        title=\"AI Assistant\"\n      >\n        <Sparkles className=\"h-6 w-6\" />\n      </Button>\n    );\n  }\n\n  return (\n    <div className=\"fixed bottom-4 right-4 w-80 md:w-96 h-[500px] bg-white rounded-lg shadow-xl border flex flex-col z-50 animate-in slide-in-from-bottom-5\">\n      <div className=\"flex items-center justify-between p-4 border-b bg-slate-50 rounded-t-lg\">\n        <div className=\"flex items-center gap-2\">\n            <Sparkles className=\"h-4 w-4 text-blue-600\" />\n            <h3 className=\"font-semibold text-sm\">AI Sales Assistant</h3>\n        </div>\n        <Button variant=\"ghost\" size=\"icon\" className=\"h-6 w-6\" onClick={() => setIsOpen(false)}>\n          <X className=\"h-4 w-4\" />\n        </Button>\n      </div>\n\n      <div className=\"flex-1 overflow-y-auto p-4 space-y-4\" ref={scrollRef}>\n        {messages.length === 0 && (\n            <div className=\"text-center text-muted-foreground text-xs mt-10\">\n                Stel een vraag over voorraad, leads of historie.\n            </div>\n        )}\n        {messages.map((m, i) => (\n          <div\n            key={i}\n            className={cn(\n              \"flex w-full\",\n              m.role === 'user' ? \"justify-end\" : \"justify-start\"\n            )}\n          >\n            <div\n              className={cn(\n                \"max-w-[80%] rounded-lg px-3 py-2 text-sm\",\n                m.role === 'user'\n                  ? \"bg-blue-600 text-white\"\n                  : \"bg-slate-100 text-slate-800\"\n              )}\n            >\n              {m.content}\n            </div>\n          </div>\n        ))}\n        {isLoading && messages[messages.length - 1]?.role !== 'assistant' && (\n            <div className=\"flex justify-start\">\n                <div className=\"bg-slate-100 rounded-lg px-3 py-2 text-xs text-slate-500 animate-pulse\">Typing...</div>\n            </div>\n        )}\n      </div>\n\n      <form onSubmit={handleSend} className=\"p-3 border-t flex gap-2\">\n        <Input\n          value={input}\n          onChange={e => setInput(e.target.value)}\n          placeholder=\"Typ je vraag...\"\n          className=\"flex-1 text-sm\"\n        />\n        <Button type=\"submit\" size=\"icon\" disabled={isLoading || !input.trim()}>\n          <Send className=\"h-4 w-4\" />\n        </Button>\n      </form>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1272, "column": 0}, "map": {"version":3,"sources":["file:///Users/jordisamardzic/Desktop/github/chatwoot-odoo-dashboard/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm bg-white\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h3\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nexport { Card, CardHeader, CardTitle, CardContent }\n\n"],"names":[],"mappings":";;;;;;;;;;;AAAA;AACA;;;;AAEA,MAAM,qBAAO,yQAAgB,CAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,oSAAC;QACC,KAAK;QACL,WAAW,IAAA,+KAAE,EACX,qEACA;QAED,GAAG,KAAK;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,yQAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,oSAAC;QACC,KAAK;QACL,WAAW,IAAA,+KAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,yQAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,oSAAC;QACC,KAAK;QACL,WAAW,IAAA,+KAAE,EACX,sDACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,4BAAc,yQAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,oSAAC;QAAI,KAAK;QAAK,WAAW,IAAA,+KAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;AAEhE,YAAY,WAAW,GAAG"}},
    {"offset": {"line": 1333, "column": 0}, "map": {"version":3,"sources":["file:///Users/jordisamardzic/Desktop/github/chatwoot-odoo-dashboard/src/app/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { useQuery } from '@tanstack/react-query';\nimport { fetchLeadByContactId } from '@/lib/api';\nimport { ChatwootContact } from '@/lib/types';\nimport LeadDetails from '@/components/LeadDetails';\nimport LeadPipeline from '@/components/LeadPipeline';\nimport ActionsPanel from '@/components/ActionsPanel';\nimport CreateLeadModal from '@/components/CreateLeadModal';\nimport AIAssistant from '@/components/AIAssistant';\nimport { Card, CardHeader, CardTitle, CardContent } from '@/components/ui/card';\nimport { Loader2, AlertCircle } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\n\nexport default function Dashboard() {\n  const [contact, setContact] = useState<ChatwootContact | null>(null);\n  const [isCreateModalOpen, setIsCreateModalOpen] = useState(false);\n\n  // Listen to Chatwoot events\n  useEffect(() => {\n    const handleMessage = (event: MessageEvent) => {\n      if (typeof event.data !== 'string') return;\n\n      try {\n        const parsed = JSON.parse(event.data);\n        if (parsed.event !== 'appContext') return;\n\n        const contactData = parsed.data.contact;\n        if (contactData) {\n          setContact({\n            id: contactData.id,\n            name: contactData.name,\n            email: contactData.email,\n            phone_number: contactData.phone_number,\n            custom_attributes: contactData.custom_attributes,\n          });\n        }\n      } catch (e) {\n        console.error(\"Error parsing Chatwoot event\", e);\n      }\n    };\n\n    window.addEventListener('message', handleMessage);\n    // Request context\n    window.parent.postMessage('chatwoot-dashboard-app:fetch-info', '*');\n\n    return () => window.removeEventListener('message', handleMessage);\n  }, []);\n\n  // Fetch Odoo Lead\n  const { data, isLoading, error, refetch } = useQuery({\n    queryKey: ['lead', contact?.id],\n    queryFn: () => fetchLeadByContactId(contact!.id),\n    enabled: !!contact?.id,\n  });\n\n  if (!contact) {\n    return (\n      <div className=\"flex h-screen items-center justify-center p-4\">\n        <Card className=\"w-full max-w-md\">\n          <CardContent className=\"flex flex-col items-center justify-center p-6 text-center\">\n            <Loader2 className=\"mb-4 h-8 w-8 animate-spin text-muted-foreground\" />\n            <p className=\"text-muted-foreground\">Wachten op Chatwoot data...</p>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <main className=\"container mx-auto max-w-3xl p-4 space-y-6 pb-20\">\n      <div className=\"flex items-center justify-between\">\n        <h1 className=\"text-xl font-bold\">Sales Command Center</h1>\n        <span className=\"text-xs text-muted-foreground\">Chatwoot ID: {contact.id}</span>\n      </div>\n\n      {isLoading && (\n        <div className=\"flex justify-center p-8\">\n          <Loader2 className=\"h-8 w-8 animate-spin text-blue-600\" />\n        </div>\n      )}\n\n      {error && (\n        <Card className=\"border-red-200 bg-red-50\">\n          <CardContent className=\"flex items-center p-4 text-red-800\">\n            <AlertCircle className=\"mr-2 h-5 w-5\" />\n            Fout bij laden van Odoo data.\n          </CardContent>\n        </Card>\n      )}\n\n      {!isLoading && !error && !data?.lead && (\n        <Card>\n          <CardContent className=\"flex flex-col items-center justify-center p-8 space-y-4\">\n            <div className=\"text-lg font-semibold\">Geen Odoo lead gevonden</div>\n            <p className=\"text-center text-muted-foreground\">\n              Dit contact is nog niet gekoppeld aan een Odoo lead.\n            </p>\n            <Button onClick={() => setIsCreateModalOpen(true)}>\n              Maak of Koppel Lead\n            </Button>\n          </CardContent>\n        </Card>\n      )}\n\n      {!isLoading && data?.lead && (\n        <>\n          <Card>\n             <CardHeader className=\"pb-2\">\n                <div className=\"flex justify-between items-center\">\n                    <CardTitle>{data.lead.name}</CardTitle>\n                    <span className=\"text-xs text-muted-foreground\">ID: {data.lead.id}</span>\n                </div>\n             </CardHeader>\n             <CardContent>\n                <LeadPipeline lead={data.lead} />\n             </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"text-base\">Lead Details</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <LeadDetails lead={data.lead} />\n            </CardContent>\n          </Card>\n\n          <Card>\n             <CardContent className=\"pt-6\">\n                <ActionsPanel lead={data.lead} />\n             </CardContent>\n          </Card>\n        </>\n      )}\n\n      <CreateLeadModal \n        isOpen={isCreateModalOpen} \n        onClose={() => {\n            setIsCreateModalOpen(false);\n            refetch();\n        }}\n        contact={contact} \n      />\n\n      <AIAssistant />\n    </main>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}